<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Profile</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    margin:0;
  }

  .card {
    max-width:520px;
    margin:40px auto;
    background:#fff;
    padding:24px;
    border-radius:14px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    text-align:center;
  }

  img {
    width:120px;
    height:120px;
    border-radius:50%;
    object-fit:cover;
    margin-bottom:16px;
    border:4px solid #2563eb;
  }

  h2 {
    margin:10px 0 4px;
  }

  .total {
    font-size:18px;
    font-weight:bold;
    margin-top:16px;
    color:#2563eb;
  }

  .skill {
    text-align:left;
    margin-top:14px;
  }

  .bar {
    background:#e5e7eb;
    height:12px;
    border-radius:6px;
    margin-top:6px;
    overflow:hidden;
    position:relative;
  }

  .fill {
    background:#10b981; /* green */
    height:100%;
    border-radius:6px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    font-weight:bold;
    font-size:12px;
    white-space:nowrap;
    text-shadow:0 1px 0 rgba(0,0,0,0.35);
  }

  .fill .percent {
    padding:0 6px;
  }

  .badges {
    margin-top:12px;
  }
  .achievements {
    text-align:left;
    margin-top:16px;
  }
  .achievements h3 {
    margin:0 0 8px 0;
    font-size:16px;
    color:#0f172a;
  }
  .achievements ul { list-style: none; padding:0; margin:0; }
  .achievements li { background:#eef2ff; margin:6px 0; padding:8px 10px; border-radius:8px; color:#0f172a; }
  .certificates {
    text-align:left;
    margin-top:12px;
  }
  .certificates h3 { margin:0 0 8px 0; font-size:16px; color:#0f172a; }
  .certificates ul { list-style:none; padding:0; margin:0; }
  .certificates li { margin:6px 0; padding:8px 10px; border-radius:8px; background:#f1fdf7; }
  .certificates a { color:#065f46; font-weight:600; text-decoration:none; }
  .certificates small { display:inline-block; margin-left:8px; color:#065f46; opacity:0.8; font-size:12px; }
</style>
</head>

<body>

<div class="card" id="profile">Loading...</div>

<!-- âœ… SHARED DATA SOURCE -->
<script src="data/students.js"></script>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

const student = students.find(s => s.id == id);

if (!student) {
  document.getElementById("profile").innerHTML = "Student not found";
} else {
  const total = student.robotics + student.programming + student.electronics + (student["3dmodeling"]||0) + (student.arduino||0);

  document.getElementById("profile").innerHTML = `
    <img src="${student.photo}" alt="${student.name}">
    <h2>${student.name}</h2>

    <div class="skill">
      Robotics
      <div class="bar"><div class="fill" style="width:${student.robotics * 10}%"><span class="percent">${student.robotics*10}%</span></div></div>
    </div>

    <div class="skill">
      Programming
      <div class="bar"><div class="fill" style="width:${student.programming * 10}%"><span class="percent">${student.programming*10}%</span></div></div>
    </div>

    <div class="skill">
      Electronics
      <div class="bar"><div class="fill" style="width:${student.electronics * 10}%"><span class="percent">${student.electronics*10}%</span></div></div>
    </div>

    <div class="skill">
      3D Modeling
      <div class="bar"><div class="fill" style="width:${(student["3dmodeling"]||0) * 10}%"><span class="percent">${(student["3dmodeling"]||0)*10}%</span></div></div>
    </div>

    <div class="skill">
      Arduino
      <div class="bar"><div class="fill" style="width:${(student.arduino||0) * 10}%"><span class="percent">${(student.arduino||0)*10}%</span></div></div>
    </div>

    <div class="total">Total Score: ${total}</div>

    <div class="achievements">
      <h3>Achievements</h3>
      <ul>
        ${student.achievements && student.achievements.length ? student.achievements.map(a => `<li>${a}</li>`).join('') : '<li>No achievements yet</li>'}
      </ul>
    </div>

    <div class="certificates">
      <h3>Certificates</h3>
      <ul>
        ${student.certificates && student.certificates.length ? student.certificates.map(c => `<li><a href="${c.url}" target="_blank">${c.title}</a>${c.date?` <small>${c.date}</small>`:''}</li>`).join('') : '<li>No certificates yet</li>'}
      </ul>
    </div>
  `;
}
</script>

</body>
</html>
